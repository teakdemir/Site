/* ==========================================
   TOLGAEA.ME - ANA JAVASCRIPT DOSYASI
   ========================================== */

// Ana sƒ±nƒ±f - T√ºm website fonksiyonlarƒ±nƒ± y√∂netir
class TolgaeaWebsite {
    constructor() {
        this.init();
    }

    // Website'i ba≈ülat
    init() {
        this.setupEventListeners();
        this.loadPageSpecificFeatures();
        this.logWelcomeMessage();
    }

    // Event listener'larƒ± kur
    setupEventListeners() {
        document.addEventListener('DOMContentLoaded', () => {
            this.onPageLoad();
        });
    }

    // Sayfa y√ºklendiƒüinde √ßalƒ±≈ü
    onPageLoad() {
        console.log('Website loaded successfully! üöÄ');
        
        // Otomatik yƒ±l g√ºncelleme
        this.updateCopyrightYear();
        
        // SVG responsiveness
        this.handleSVGResponsiveness();
        
        // 1 saniye sonra JavaScript mesajƒ±
        setTimeout(() => {
            console.log('JavaScript is working! üíª');
        }, 1000);
    }

    // SVG responsive kontrol√º
    handleSVGResponsiveness() {
        const updateSVG = () => {
            const desktopSVG = document.querySelector('.desktop-svg');
            const mobileSVG = document.querySelector('.mobile-svg');
            
            if (desktopSVG && mobileSVG) {
                if (window.innerWidth <= 768) {
                    // Mobile
                    desktopSVG.style.display = 'none';
                    mobileSVG.style.display = 'block';
                } else {
                    // Desktop
                    desktopSVG.style.display = 'block';
                    mobileSVG.style.display = 'none';
                }
            }
        };

        // ƒ∞lk y√ºkleme
        updateSVG();
        
        // Ekran boyutu deƒüi≈ütiƒüinde
        window.addEventListener('resize', updateSVG);
    }

    // Copyright yƒ±lƒ±nƒ± otomatik g√ºncelle
    updateCopyrightYear() {
        const currentYear = new Date().getFullYear();
        
        // Footer'daki t√ºm copyright metinlerini bul ve g√ºncelle
        const footers = document.querySelectorAll('footer p');
        footers.forEach(footerP => {
            // 2025 veya herhangi bir 4 haneli yƒ±lƒ± g√ºncel yƒ±lla deƒüi≈ütir
            const yearRegex = /&copy;\s*\d{4}/g;
            if (yearRegex.test(footerP.innerHTML)) {
                footerP.innerHTML = footerP.innerHTML.replace(yearRegex, `&copy; ${currentYear}`);
            }
        });
        
        // Debug i√ßin konsola yazdƒ±r
        if (currentYear !== 2025) {
            TolgaeaWebsite.log(`Yƒ±l otomatik g√ºncellendi: ${currentYear}`, 'success');
        }
    }

    // Ho≈ü geldin mesajlarƒ±nƒ± konsola yazdƒ±r
    logWelcomeMessage() {
        const currentPage = this.getCurrentPageName();
        
        setTimeout(() => {
            switch(currentPage) {
                case 'index':
                    console.log('Ana sayfa y√ºklendi! üè†');
                    break;
                case 'projects':
                    console.log('Projeler sayfasƒ± y√ºklendi! üéÆ');
                    break;
                case 'completed-games':
                    console.log('Tamamlanan oyunlar sayfasƒ± y√ºklendi! üèÜ');
                    break;
                case 'current-project':
                    console.log('Mevcut proje sayfasƒ± y√ºklendi! ‚ö°');
                    break;
                case 'future-project':
                    console.log('Gelecek proje sayfasƒ± y√ºklendi! üîÆ');
                    break;
                case 'resume':
                    console.log('√ñzge√ßmi≈ü sayfasƒ± y√ºklendi! üìÑ');
                    break;
                case 'contact':
                    console.log('ƒ∞leti≈üim sayfasƒ± y√ºklendi! üìß');
                    break;
                default:
                    console.log('Sayfa y√ºklendi! ‚ú®');
            }
        }, 1500);
    }

    // Mevcut sayfa adƒ±nƒ± al
    getCurrentPageName() {
        const path = window.location.pathname;
        const fileName = path.split('/').pop();
        
        if (!fileName || fileName === 'index.html' || fileName === '') {
            return 'index';
        }
        
        return fileName.replace('.html', '');
    }

    // Sayfa √∂zel √∂zelliklerini y√ºkle
    loadPageSpecificFeatures() {
        const currentPage = this.getCurrentPageName();
        
        switch(currentPage) {
            case 'index':
                this.setupContactToggle();
                break;
            case 'contact':
                this.setupContactPage();
                break;
        }
    }

    // Ana sayfa contact toggle √∂zelliƒüi
    setupContactToggle() {
        // Bu fonksiyon ana sayfada contact info toggle i√ßin kullanƒ±labilir
        window.toggleContact = () => {
            const contactInfo = document.getElementById('contact-info');
            
            if (contactInfo) {
                contactInfo.remove();
            } else {
                const contactDiv = document.createElement('div');
                contactDiv.id = 'contact-info';
                contactDiv.innerHTML = `
                    <div style="margin-top: 15px; padding: 15px; background: #f0f0f0; border-radius: 10px;">
                        <p><strong>Email:</strong> <a href="mailto:takdemirbusiness@gmail.com" style="color: #667eea; text-decoration: none;">takdemirbusiness@gmail.com</a></p>
                        <p><strong>LinkedIn:</strong> <a href="https://www.linkedin.com/in/tolga-eren-akdemir-1b9021266/" target="_blank" style="color: #667eea; text-decoration: none;">LinkedIn Profile</a></p>
                        <p><strong>GitHub:</strong> <a href="https://github.com/teakdemir" target="_blank" style="color: #667eea; text-decoration: none;">GitHub Profile</a></p>
                    </div>
                `;
                event.target.closest('.card').appendChild(contactDiv);
            }
        };
    }

    // ƒ∞leti≈üim sayfasƒ± √∂zelliklerini kur
    setupContactPage() {
        // Email kopyalama fonksiyonu
        window.copyEmail = (event) => {
            event.preventDefault();
            const email = 'takdemirbusiness@gmail.com';
            
            navigator.clipboard.writeText(email).then(() => {
                this.showToast('Email copied to clipboard!');
            }).catch(() => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = email;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                this.showToast('Email copied to clipboard!');
            });
        };
    }

    // Toast mesajƒ± g√∂ster
    showToast(message) {
        // Mevcut toast'ƒ± kaldƒ±r
        const existingToast = document.querySelector('.toast');
        if (existingToast) {
            existingToast.remove();
        }

        // Yeni toast olu≈ütur
        const toast = document.createElement('div');
        toast.className = 'toast';
        toast.textContent = message;
        
        document.body.appendChild(toast);

        // Toast'ƒ± g√∂ster
        setTimeout(() => {
            toast.classList.add('show');
        }, 10);

        // 2 saniye sonra gizle
        setTimeout(() => {
            toast.classList.add('fade-out');
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.parentNode.removeChild(toast);
                }
            }, 300);
        }, 2000);
    }

    // U√ßan resim animasyonu olu≈ütur
    createFloatingImage() {
        // 1-5 arasƒ± rastgele resim numarasƒ±
        const imageNumber = Math.floor(Math.random() * 5) + 1;
        
        // Ekranda rastgele pozisyon
        const x = Math.random() * (window.innerWidth - 60);
        const y = Math.random() * (window.innerHeight - 60);
        
        // Resim elementi olu≈ütur
        const img = document.createElement('img');
        
        // Farklƒ± yollarƒ± dene
        const possiblePaths = [
            `images/Random/${imageNumber}.jpg`,
            `Random/${imageNumber}.jpg`,
            `./images/Random/${imageNumber}.jpg`,
            `./Random/${imageNumber}.jpg`
        ];
        
        img.src = possiblePaths[0]; // ƒ∞lk yolu dene
        img.className = 'floating-image';
        img.style.left = x + 'px';
        img.style.top = y + 'px';
        
        // Hata durumunda diƒüer yollarƒ± dene
        let pathIndex = 0;
        img.onerror = () => {
            pathIndex++;
            if (pathIndex < possiblePaths.length) {
                img.src = possiblePaths[pathIndex];
            } else {
                console.log(`‚ù§Ô∏è Tƒ±klandƒ± ama resimler bulunamadƒ±. Kontrol edin:`);
                console.log(`- images/Random/ klas√∂r√º var mƒ±?`);
                console.log(`- 1.jpg, 2.jpg, 3.jpg, 4.jpg, 5.jpg dosyalarƒ± var mƒ±?`);
                // Resim bulunamazsa varsayƒ±lan emoji kullan
                img.remove();
                this.createFloatingEmoji();
                return;
            }
        };
        
        // Sayfaya ekle
        document.body.appendChild(img);
        
        // Kƒ±sa bir gecikme sonra animasyonu ba≈ülat
        setTimeout(() => {
            img.classList.add('animate');
        }, 10);
        
        // Animasyon bittikten sonra DOM'dan kaldƒ±r
        setTimeout(() => {
            if (img.parentNode) {
                img.parentNode.removeChild(img);
            }
        }, 2000);
    }

    // Resim bulunamazsa emoji kullan
    createFloatingEmoji() {
        const emojis = ['‚ù§Ô∏è', 'üéÆ', 'üíª', 'üöÄ', '‚≠ê'];
        const randomEmoji = emojis[Math.floor(Math.random() * emojis.length)];
        
        // Ekranda rastgele pozisyon
        const x = Math.random() * (window.innerWidth - 60);
        const y = Math.random() * (window.innerHeight - 60);
        
        // Emoji elementi olu≈ütur
        const emojiDiv = document.createElement('div');
        emojiDiv.textContent = randomEmoji;
        emojiDiv.className = 'floating-image';
        emojiDiv.style.left = x + 'px';
        emojiDiv.style.top = y + 'px';
        emojiDiv.style.fontSize = '40px';
        emojiDiv.style.display = 'flex';
        emojiDiv.style.alignItems = 'center';
        emojiDiv.style.justifyContent = 'center';
        
        // Sayfaya ekle
        document.body.appendChild(emojiDiv);
        
        // Animasyon ba≈ülat
        setTimeout(() => {
            emojiDiv.classList.add('animate');
        }, 10);
        
        // DOM'dan kaldƒ±r
        setTimeout(() => {
            if (emojiDiv.parentNode) {
                emojiDiv.parentNode.removeChild(emojiDiv);
            }
        }, 2000);
    }

    // Utility fonksiyonlarƒ±
    static getRandomNumber(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    static isMobile() {
        return window.innerWidth <= 768;
    }

    static log(message, type = 'info') {
        const timestamp = new Date().toLocaleTimeString();
        const prefix = `[${timestamp}] Tolgaea.me:`;
        
        switch(type) {
            case 'error':
                console.error(prefix, message);
                break;
            case 'warn':
                console.warn(prefix, message);
                break;
            case 'success':
                console.log(`%c${prefix} ${message}`, 'color: #43e97b; font-weight: bold;');
                break;
            default:
                console.log(prefix, message);
        }
    }
}

// Website'i ba≈ülat
const tolgaeaWebsite = new TolgaeaWebsite();

// Global fonksiyonlarƒ± window objesine ekle (HTML'den √ßaƒüƒ±rabilmek i√ßin)
window.createFloatingImage = () => {
    tolgaeaWebsite.createFloatingImage();
};

// Diƒüer global fonksiyonlar da buraya eklenebilir
window.tolgaea = tolgaeaWebsite;

// Debug modunu aktifle≈ütir (geli≈ütirme i√ßin)
if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
    window.tolgaea.debug = true;
    TolgaeaWebsite.log('Debug mode active! üîß', 'warn');
}

// SVG Responsive Control - EKSTRA KOD
document.addEventListener('DOMContentLoaded', () => {
    const updateSVG = () => {
        const desktop = document.querySelector('.desktop-svg');
        const mobile = document.querySelector('.mobile-svg');
        
        if (desktop && mobile) {
            if (window.innerWidth <= 768) {
                // Mobile - Dikey SVG
                desktop.style.display = 'none';
                mobile.style.display = 'block';
                console.log('üì± Mobile SVG aktif');
            } else {
                // Desktop - Yatay SVG  
                desktop.style.display = 'block';
                mobile.style.display = 'none';
                console.log('üíª Desktop SVG aktif');
            }
        }
    };
    
    // ƒ∞lk y√ºkleme
    updateSVG();
    
    // Ekran boyutu deƒüi≈üince
    window.addEventListener('resize', updateSVG);
});